<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LED Ur">
    <title>LED Ring Digital Ur</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        html, body { height:100%; width:100%; overflow:hidden; }
        body {
            background:#000; display:flex; align-items:center; justify-content:center;
            font-family:'Courier New', monospace; position:fixed; inset:0;
        }
        .clock-container { position:relative; display:flex; align-items:center; justify-content:center; }
        .seconds-ring { position:absolute; width:100%; height:100%; border-radius:50%; transform:rotate(-90deg); }
        .second-dot { position:absolute; border-radius:50%; background:#333; opacity:0.3; transition:all .1s ease; }
        .second-dot.active { background:#ff0000; opacity:1; }
        .digital-display { position:absolute; text-align:center; z-index:10; width:100%; top:52%; transform:translateY(-50%); }
        .time-display { font-weight:bold; color:#ff0000; font-family:'Courier New', monospace; }
        .date-display { font-weight:bold; color:#ff0000; font-family:'Courier New', monospace; opacity:0.8; }
        .weather-display { font-weight:bold; color:#ff0000; font-family:'Courier New', monospace; opacity:0.6; margin-top:10px; }

        /* SPECIFIK: Skjul vejret via CSS for iPad mini breakpoint (portrait) */
        @media screen and (min-width: 768px) and (max-width: 820px) and (orientation: portrait) {
            .clock-container { width:600px; height:600px; position:absolute; left:45%; top:52%; margin-left:-550px; margin-top:-300px; }
            .time-display { font-size:85px; letter-spacing:10px; margin-bottom:15px; }
            .date-display { font-size:34px; letter-spacing:5px; }
            /* skjul vejret helt i denne CSS-breakpoint */
            .weather-display { display:none !important; }
        }

        /* Valgfrit: ekstra sikring i landscape i samme bredde-område (hvis du ønsker det) */
        @media (orientation: landscape) and (min-width: 768px) and (max-width: 1024px) {
            /* her lader vi vejret være synligt i landscape - men JS bestemmer endeligt */
        }

        /* andre breakpoint-stilarter (uændrede/forenklet) */
        @media screen and (min-width: 821px) and (max-width: 1024px) {
            .clock-container { width:700px; height:700px; }
            .time-display { font-size:110px; letter-spacing:15px; margin-bottom:25px; }
            .date-display { font-size:44px; letter-spacing:8px; }
            .weather-display { font-size:36px; letter-spacing:6px; }
        }
        @media screen and (min-width: 1025px) {
            .clock-container { width:800px; height:800px; }
            .time-display { font-size:130px; letter-spacing:18px; margin-bottom:30px; }
            .date-display { font-size:52px; letter-spacing:10px; }
            .weather-display { font-size:42px; letter-spacing:8px; }
        }
        @media screen and (max-width: 767px) {
            .clock-container { width:350px; height:350px; }
            .time-display { font-size:50px; letter-spacing:8px; margin-bottom:15px; }
            .date-display { font-size:20px; letter-spacing:4px; }
            .weather-display { font-size:16px; letter-spacing:3px; }
        }

        /* Status indikator (valgfri) */
        .status-indicator { position:fixed; top:20px; right:20px; padding:8px 12px; border-radius:8px; background:rgba(0,0,0,0.6); color:#fff; font-weight:bold; z-index:1000; display:none; }
        .status-indicator.show { display:block; }
    </style>
</head>
<body>
    <div class="status-indicator" id="statusIndicator">STATUS</div>

    <div class="clock-container" id="clockContainer">
        <div class="seconds-ring" id="secondsRing"></div>

        <div class="digital-display">
            <div class="time-display" id="timeDisplay">00:00</div>
            <div class="date-display" id="dateDisplay">01-01-2024</div>
            <div class="weather-display" id="weatherDisplay">--°C</div>
        </div>
    </div>

    <script>
        // Enkel iPad mini-detektion (samme breakpoint som CSS)
        function isIpadMini() {
            try {
                var inRange = window.matchMedia && window.matchMedia('(min-width: 768px) and (max-width: 820px)').matches;
                var uaIpad = /iPad/.test(navigator.userAgent);
                var ipadOSAsMac = (navigator.platform === 'MacIntel' && navigator.maxTouchPoints && navigator.maxTouchPoints > 1);
                return (uaIpad || ipadOSAsMac) && inRange;
            } catch (e) {
                return false;
            }
        }

        var IS_IPAD_MINI = isIpadMini();

        // Hvis iPad mini: skjul vejret med det samme (JS fallback hvis CSS ikke dækker)
        (function hideWeatherOnIpadMini() {
            if (!IS_IPAD_MINI) return;
            var el = document.getElementById('weatherDisplay');
            if (el) {
                el.style.display = 'none';
                console.log('Vejret er skjult (iPad mini)');
            }
        })();

        // --- Ur- og ringfunktioner (forbliver som før, minimal) ---
        function createSecondsRing() {
            var container = document.getElementById('clockContainer');
            var secondsRing = document.getElementById('secondsRing');
            var numDots = 60;
            var containerSize = Math.min(container.offsetWidth || 800, container.offsetHeight || 800);
            var radius = containerSize * 0.475;
            var centerOffset = containerSize / 2;
            var dotSize = Math.max(6, containerSize * 0.018);
            secondsRing.innerHTML = '';
            for (var i = 0; i < numDots; i++) {
                var dot = document.createElement('div');
                dot.className = 'second-dot';
                dot.id = 'second-' + i;
                var angle = (i * 360 / numDots) * Math.PI / 180;
                var x = Math.cos(angle) * radius + centerOffset;
                var y = Math.sin(angle) * radius + centerOffset;
                dot.style.width = dotSize + 'px';
                dot.style.height = dotSize + 'px';
                dot.style.left = (x - dotSize / 2) + 'px';
                dot.style.top = (y - dotSize / 2) + 'px';
                secondsRing.appendChild(dot);
            }
        }

        function pad(n){ return n<10 ? '0'+n : ''+n; }
        function updateClock(){
            var now=new Date();
            document.getElementById('timeDisplay').textContent = pad(now.getHours()) + ':' + pad(now.getMinutes());
            document.getElementById('dateDisplay').textContent = pad(now.getDate()) + '-' + pad(now.getMonth()+1) + '-' + now.getFullYear();
            var s = now.getSeconds();
            for (var i=0;i<60;i++){
                var d = document.getElementById('second-'+i);
                if(!d) continue;
                d.className = (i <= s) ? 'second-dot active' : 'second-dot';
            }
        }

        function init(){
            createSecondsRing();
            updateClock();
            setInterval(updateClock, 1000);

            // Genskab ring ved resize
            var resizeTimer;
            window.addEventListener('resize', function(){
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function(){
                    createSecondsRing();
                    updateClock();
                    // genkør ipad-detektion på resize og skjul hvis nødvendigt
                    if (isIpadMini()) {
                        var el = document.getElementById('weatherDisplay');
                        if (el) el.style.display = 'none';
                    }
                }, 200);
            });
        }

        if (document.readyState !== 'loading') init();
        else document.addEventListener('DOMContentLoaded', init, false);
    </script>
</body>
</html>
